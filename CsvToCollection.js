// Generated by CoffeeScript 1.6.2
(function() {
  this.CreateCollectionFromCsv = function(path, collectionName) {
    var collection, e, object, _i, _len, _ref;

    collection = new Meteor.Collection(collectionName != null ? collectionName : path.split("/").pop());
    if (Meteor.isServer) {
      collection.remove({});
      try {
        _ref = CSV.parse(String(Npm.require('fs').readFileSync(path)));
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          object = _ref[_i];
          collection.insert(object);
        }
      } catch (_error) {
        e = _error;
        console.log(e);
        console.log("CreateCollectionFromCsv failed path: " + path);
      }
    }
    return collection;
  };

  this.CreateCollectionFromPublicCsv = function(publicPath, collectionName) {
    return this.CreateCollectionFromCsv("../client/app/" + publicPath, collectionName);
  };

  this.CsvToCollection = {};

  if (Meteor.isServer) {
    this.CsvToCollection._csvtojson = Npm.require('csvtojson');
  }

}).call(this);
